grant connect, resource, create view to 
migration_repo identified by migration_repo;

CREATE TABLE ServiceType (
Id NUMBER GENERATED BY DEFAULT AS IDENTITY,
ServiceName VARCHAR2(50) NOT NULL UNIQUE,
CONSTRAINT PK_SERVICE_TYPE PRIMARY KEY (Id)
);

CREATE TABLE City (
Id NUMBER GENERATED BY DEFAULT AS IDENTITY,
CityName VARCHAR2(100) NOT NULL UNIQUE,
CONSTRAINT PK_CITY PRIMARY KEY (Id)
);

CREATE TABLE Route (
Id NUMBER GENERATED BY DEFAULT AS IDENTITY,
RouteName VARCHAR2(100) NOT NULL UNIQUE,
Distance NUMBER(5,1) NOT NULL,
DeparturePoint VARCHAR2(100) NOT NULL,
ArrivalPoint VARCHAR2(100) NOT NULL,
CONSTRAINT PK_ROUTE PRIMARY KEY (Id),
CONSTRAINT FK_CITYD_ROUTE FOREIGN KEY (DeparturePoint) REFERENCES City(CityName),
CONSTRAINT FK_CITYA_ROUTE FOREIGN KEY (ArrivalPoint) REFERENCES City(CityName)
);

CREATE TABLE Customer (
Id NUMBER GENERATED BY DEFAULT AS IDENTITY,
CustomerName VARCHAR2(300) UNIQUE NOT NULL,
CONSTRAINT PK_CUSTOMER PRIMARY KEY (Id)
);

CREATE TABLE Service (
Id NUMBER GENERATED BY DEFAULT AS IDENTITY,
ServiceType VARCHAR2(50) NOT NULL,
RouteName VARCHAR2(100) NOT NULL,
CONSTRAINT PK_SERVICE PRIMARY KEY (Id),
CONSTRAINT FK_SERVICE_SERVICETYPE FOREIGN KEY (ServiceType) REFERENCES ServiceType(ServiceName),
CONSTRAINT FK_SERVICE_ROUTE FOREIGN KEY (RouteName) REFERENCES Route(RouteName)
);

CREATE TABLE "Order" (
Id NUMBER GENERATED BY DEFAULT AS IDENTITY,
CustomerName VARCHAR2(300) NOT NULL,
ServiceId NUMBER NOT NULL,
OrderDate TIMESTAMP NOT NULL,
OrderExec TIMESTAMP NOT NULL,
CONSTRAINT PK_ORDER PRIMARY KEY (Id),
CONSTRAINT FK_ORDER_CUSTOMER FOREIGN KEY (CustomerName) REFERENCES Customer(CustomerName),
CONSTRAINT FK_ORDER_SERVICE FOREIGN KEY (ServiceId) REFERENCES Service(Id)
);


INSERT into City values
('Минск'),('Могилев'),('Брест'),('Витебск'),('Гродно'),
('Гомель'),('Москва'),('Вильнюс'),('Варшава'),
('Белосток'),('Киев');

INSERT into ServiceType values 
('Перевозка людей'),
('Перевозка автомобилей'),
('Перевозка древесины'),
('Перевозка жидкостей пищевой промышленности'),
('Перевозка жидкостей химической промышленности');

INSERT into Route values
('Минск-Белыничи-Могилев','212','Минск','Могилев'),
('Минск-Орша-Витебск','294','Минск','Витебск'),
('Витебск-Минск','246','Витебск','Минск'),
('Минск-Гомель','213','Минск','Гомель'),
('Гомель-Минск','213','Гомель','Минск'),
('Минск-Гродно','246','Минск','Гродно'),
('Гродно-Минск','246','Гродно','Минск'),
('Минск-Брест','234','Минск','Брест'),
('Брест-Минск','234','Брест','Минск'),
('Минск-Москва','586','Минск','Москва'),
('Минск-Варшава','601','Минск','Варшава'),
('Минск-Белосток','496','Минск','Белосток'),
('Минск-Киев','563','Минск','Киев');
INSERT into Service values
('Перевозка людей','Минск-Белыничи-Могилев'),
('Перевозка людей','Минск-Орша-Витебск'),
('Перевозка людей','Минск-Варшава'),
('Перевозка людей','Минск-Белосток'),
('Перевозка людей','Минск-Киев'),
('Перевозка людей','Витебск-Минск'),

('Перевозка жидкостей химической промышленности','Минск-Гомель'),
('Перевозка жидкостей пищевой промышленности','Минск-Гомель'),
('Перевозка древесины','Минск-Гомель'),
('Перевозка автомобилей','Минск-Гомель'),

('Перевозка жидкостей химической промышленности','Брест-Минск'),
('Перевозка жидкостей пищевой промышленности','Брест-Минск'),
('Перевозка древесины','Брест-Минск'),
('Перевозка автомобилей','Брест-Минск'),

('Перевозка жидкостей химической промышленности','Минск-Гомель'),
('Перевозка жидкостей пищевой промышленности','Минск-Гомель'),
('Перевозка древесины','Минск-Гомель'),
('Перевозка автомобилей','Минск-Гомель');

INSERT into Customer values
('Лукоил'),('Белнефтехим'),('АйТекАрт'),('СильверТур'),('ТурБай'),('Бабушкина Крынка');

INSERT INTO Trucking.dbo.[Order] values 
('АйТекАрт',2,'11.06.2023','12.06.2023'),
('Лукоил',1,'11.01.2023','12.02.2023'),
('Белнефтехим',1,'12.02.2023','12.03.2023')